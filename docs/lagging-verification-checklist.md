# Lagging 페이지 성능 개선 검증 체크리스트

## 📋 개요
- **목적**: 성능 개선 후 기능 손실 방지 및 데이터 정확성 보장
- **사용 시점**: 각 Phase 완료 후 및 최종 검증 시
- **검증자**: 개발자 및 사용자

## 🎯 핵심 검증 원칙

### 1. 기능 보존 원칙
- ✅ **기존 기능 100% 유지**: 모든 기능이 개선 전과 동일하게 동작해야 함
- ✅ **UI 일관성**: 화면 레이아웃, 스타일, 애니메이션이 동일해야 함
- ✅ **데이터 정확성**: 모든 지표 계산 결과가 기존과 정확히 일치해야 함
- ✅ **사용자 경험**: 사용자 플로우가 변경되지 않아야 함

### 2. 성능 개선 검증
- ✅ **로딩 시간 단축**: 초기 로딩 시간이 60-70% 단축되어야 함
- ✅ **API 호출 감소**: API 호출 횟수가 80-85% 감소해야 함
- ✅ **메모리 최적화**: 메모리 사용량이 40-50% 개선되어야 함

## 🔍 상세 검증 체크리스트

### Phase 1: 백엔드 API 최적화 검증

#### 1.1 통합 API 엔드포인트 검증
- [ ] `/api/lagging/summary/:year` 엔드포인트 정상 동작
- [ ] 모든 지표 데이터가 정확히 반환됨
- [ ] 응답 시간이 기존 대비 50% 이상 단축됨
- [ ] 에러 처리가 적절히 구현됨

#### 1.2 데이터 정확성 검증
- [ ] 사고 건수 계산 결과가 기존과 동일함
- [ ] 재해자 수 계산 결과가 기존과 동일함
- [ ] 물적피해금액 계산 결과가 기존과 동일함
- [ ] LTIR 계산 결과가 기존과 동일함
- [ ] TRIR 계산 결과가 기존과 동일함
- [ ] 강도율 계산 결과가 기존과 동일함

#### 1.3 데이터베이스 쿼리 최적화 검증
- [ ] JOIN 쿼리가 정상 동작함
- [ ] 인덱스가 적절히 적용됨
- [ ] 쿼리 실행 시간이 개선됨
- [ ] 메모리 사용량이 최적화됨

### Phase 2: 프론트엔드 구조 개선 검증

#### 2.1 상태 관리 검증
- [ ] 통합 상태 객체가 정상 동작함
- [ ] 개별 상태 변수가 제거됨
- [ ] React Query가 정상 동작함
- [ ] 불필요한 리렌더링이 제거됨

#### 2.2 컴포넌트 분리 검증
- [ ] LaggingPage 컴포넌트가 정상 분리됨
- [ ] 각 카드 컴포넌트가 독립적으로 동작함
- [ ] 차트 컴포넌트가 정상 렌더링됨
- [ ] 컴포넌트 재사용성이 향상됨

#### 2.3 성능 최적화 검증
- [ ] React.memo가 적절히 적용됨
- [ ] useMemo가 적절히 적용됨
- [ ] useCallback이 적절히 적용됨
- [ ] 지연 로딩이 정상 동작함

### Phase 3: 캐싱 시스템 개선 검증

#### 3.1 캐시 동작 검증
- [ ] 캐시 시스템이 정상 동작함
- [ ] 캐시 히트율이 80% 이상임
- [ ] 캐시 무효화가 적절히 동작함
- [ ] 메모리 사용량이 최적화됨

#### 3.2 캐시 정확성 검증
- [ ] 캐시된 데이터가 최신 상태임
- [ ] 캐시 무효화 후 데이터가 정확히 갱신됨
- [ ] 캐시 충돌이 발생하지 않음

### Phase 4: 그래프 렌더링 최적화 검증

#### 4.1 차트 렌더링 검증
- [ ] 모든 차트가 정상 렌더링됨
- [ ] 차트 데이터가 정확함
- [ ] 차트 인터랙션이 정상 동작함
- [ ] 차트 성능이 개선됨

#### 4.2 차트 최적화 검증
- [ ] 차트 데이터 전처리가 최적화됨
- [ ] 가상화가 적절히 적용됨
- [ ] 점진적 로딩이 정상 동작함

## 🧪 기능별 상세 검증

### 1. 연도 선택 기능 검증
- [ ] 연도 드롭다운이 정상 동작함
- [ ] 연도 변경 시 데이터가 정확히 갱신됨
- [ ] 연도별 데이터가 정확히 표시됨
- [ ] 연도 변경 시 로딩 상태가 적절히 표시됨

### 2. 지표 카드 검증

#### 2.1 사고 건수 카드
- [ ] 전체 사고 건수가 정확히 표시됨
- [ ] 임직원/협력업체 구분이 정확함
- [ ] 사업장별 사고 건수가 정확함
- [ ] 로딩 상태가 적절히 표시됨

#### 2.2 재해자 수 카드
- [ ] 전체 재해자 수가 정확히 표시됨
- [ ] 임직원/협력업체 구분이 정확함
- [ ] 상해정도별 분포가 정확함
- [ ] 로딩 상태가 적절히 표시됨

#### 2.3 물적피해금액 카드
- [ ] 직접피해금액이 정확히 표시됨
- [ ] 간접피해금액이 정확히 계산됨
- [ ] 로딩 상태가 적절히 표시됨

#### 2.4 LTIR 카드
- [ ] LTIR 값이 정확히 계산됨
- [ ] 임직원/협력업체 LTIR이 정확함
- [ ] 기준 변경(20만시/100만시)이 정상 동작함
- [ ] 로딩 상태가 적절히 표시됨

#### 2.5 TRIR 카드
- [ ] TRIR 값이 정확히 계산됨
- [ ] 임직원/협력업체 TRIR이 정확함
- [ ] 기준 변경(20만시/100만시)이 정상 동작함
- [ ] 로딩 상태가 적절히 표시됨

#### 2.6 강도율 카드
- [ ] 강도율이 정확히 계산됨
- [ ] 임직원/협력업체 강도율이 정확함
- [ ] 총 근로손실일이 정확히 표시됨
- [ ] 로딩 상태가 적절히 표시됨

### 3. 그래프 차트 검증

#### 3.1 사고 추이 차트
- [ ] 연도별 사고 건수가 정확히 표시됨
- [ ] 연도별 재해자 수가 정확히 표시됨
- [ ] 연도별 물적피해가 정확히 표시됨
- [ ] 차트 인터랙션이 정상 동작함

#### 3.2 안전지수 차트
- [ ] 연도별 LTIR이 정확히 표시됨
- [ ] 연도별 TRIR이 정확히 표시됨
- [ ] 연도별 강도율이 정확히 표시됨
- [ ] 차트 인터랙션이 정상 동작함

#### 3.3 통합 사고 분석 차트
- [ ] 사고 건수와 재해자 수가 정확히 표시됨
- [ ] 사업장별 데이터가 정확히 표시됨
- [ ] 차트 인터랙션이 정상 동작함

#### 3.4 상세 안전지수 차트
- [ ] 임직원/협력업체 구분이 정확히 표시됨
- [ ] LTIR, TRIR, 강도율이 정확히 표시됨
- [ ] 차트 인터랙션이 정상 동작함

### 4. 새로고침 기능 검증
- [ ] 새로고침 버튼이 정상 동작함
- [ ] 새로고침 시 모든 데이터가 정확히 갱신됨
- [ ] 새로고침 중 로딩 상태가 적절히 표시됨
- [ ] 새로고침 후 캐시가 적절히 갱신됨

### 5. 차트 타입 변경 검증
- [ ] 기본 차트와 상세 차트 전환이 정상 동작함
- [ ] 차트 타입 변경 시 데이터가 정확히 표시됨
- [ ] 차트 타입 변경 시 성능이 개선됨

## 📊 성능 측정 체크리스트

### 1. 로딩 시간 측정
- [ ] 초기 로딩 시간: ___초 (목표: 3-5초)
- [ ] 연도 변경 시 로딩 시간: ___초 (목표: 1-2초)
- [ ] 새로고침 시 로딩 시간: ___초 (목표: 2-3초)

### 2. API 호출 횟수 측정
- [ ] 초기 로딩 시 API 호출 횟수: ___회 (목표: 3-5회)
- [ ] 연도 변경 시 API 호출 횟수: ___회 (목표: 1-2회)
- [ ] 새로고침 시 API 호출 횟수: ___회 (목표: 2-3회)

### 3. 메모리 사용량 측정
- [ ] 초기 로딩 시 메모리 사용량: ___MB
- [ ] 연도 변경 후 메모리 사용량: ___MB
- [ ] 메모리 누수 여부: ___ (있음/없음)

### 4. 번들 크기 측정
- [ ] 개선 전 번들 크기: ___KB
- [ ] 개선 후 번들 크기: ___KB
- [ ] 번들 크기 감소율: ___%

## 🔧 기술적 검증 체크리스트

### 1. TypeScript 검증
- [ ] TypeScript 컴파일 에러: 0개
- [ ] 타입 안정성: 100%
- [ ] any 타입 사용: 최소화됨

### 2. 빌드 검증
- [ ] npm run build 성공
- [ ] npm run dev 정상 동작
- [ ] 프로덕션 빌드 성공

### 3. 테스트 검증
- [ ] 단위 테스트 통과율: ___%
- [ ] 통합 테스트 통과율: ___%
- [ ] E2E 테스트 통과율: ___%

### 4. 브라우저 호환성 검증
- [ ] Chrome 정상 동작
- [ ] Firefox 정상 동작
- [ ] Safari 정상 동작
- [ ] Edge 정상 동작

## 🚨 오류 및 예외 처리 검증

### 1. 네트워크 오류 처리
- [ ] API 호출 실패 시 적절한 에러 메시지 표시
- [ ] 네트워크 연결 끊김 시 적절한 처리
- [ ] 재시도 메커니즘이 정상 동작함

### 2. 데이터 오류 처리
- [ ] 잘못된 데이터 형식 시 적절한 처리
- [ ] 빈 데이터 시 적절한 처리
- [ ] 계산 오류 시 적절한 처리

### 3. 사용자 오류 처리
- [ ] 잘못된 입력 시 적절한 처리
- [ ] 권한 부족 시 적절한 처리
- [ ] 세션 만료 시 적절한 처리

## 📝 검증 결과 기록

### 검증 일시
- 검증 시작: ___년 ___월 ___일 ___시 ___분
- 검증 완료: ___년 ___월 ___일 ___시 ___분
- 검증 소요 시간: ___시간 ___분

### 검증자 정보
- 검증자: ___
- 검증 환경: ___
- 검증 브라우저: ___

### 검증 결과 요약
- 총 검증 항목: ___개
- 통과 항목: ___개
- 실패 항목: ___개
- 통과율: ___%

### 주요 발견 사항
1. ___
2. ___
3. ___

### 개선 권장 사항
1. ___
2. ___
3. ___

### 최종 판정
- [ ] ✅ 검증 통과 - 기능 손실 없음, 성능 개선 달성
- [ ] ⚠️ 조건부 통과 - 일부 개선 필요
- [ ] ❌ 검증 실패 - 기능 손실 발생, 롤백 필요

### 승인 정보
- 승인자: ___
- 승인 일시: ___년 ___월 ___일 ___시 ___분
- 승인 의견: ___

---

**검증 체크리스트 버전**: 1.0.0
**최종 업데이트**: 2025-01-27
**다음 검토 예정**: 2025-02-03 